// Code generated by eugene. DO NOT EDIT.
package {{ .Package }}

import (
	"encoding/json"
	"net/http"
{{- if .HasQueryParams }}
	"strconv"
{{- end }}
)

// StrictHandler wraps a StrictServerInterface to handle stdlib requests.
type StrictHandler struct {
	ssi StrictServerInterface
}

// NewStrictHandler creates a new StrictHandler.
func NewStrictHandler(ssi StrictServerInterface) *StrictHandler {
	return &StrictHandler{ssi: ssi}
}
{{ range .Operations }}
// {{ .ID }} handles {{ .Method }} {{ .Path }}
func (h *StrictHandler) {{ .ID }}(w http.ResponseWriter, r *http.Request) {
{{- if or .PathParams .QueryParams .HeaderParams .RequestBody }}
	var request {{ .ID }}RequestObject
{{- end }}
{{- range .PathParams }}
	request.{{ .GoName }} = r.PathValue("{{ .Name }}")
{{- end }}
{{- range .QueryParams }}
{{- if hasPrefix .Type "[]" }}
	if values := r.URL.Query()["{{ .Name }}"]; len(values) > 0 {
		{{ if .Required }}request.{{ .GoName }} = values{{ else }}request.{{ .GoName }} = &values{{ end }}
	}
{{- else if eq .Type "string" }}
	if v := r.URL.Query().Get("{{ .Name }}"); v != "" {
		request.{{ .GoName }} = {{ if not .Required }}&{{ end }}v
	}
{{- else if eq .Type "int" }}
	if v := r.URL.Query().Get("{{ .Name }}"); v != "" {
		if parsed, err := strconv.Atoi(v); err == nil {
			{{ if .Required }}request.{{ .GoName }} = parsed{{ else }}request.{{ .GoName }} = &parsed{{ end }}
		}
	}
{{- else if eq .Type "int64" }}
	if v := r.URL.Query().Get("{{ .Name }}"); v != "" {
		if parsed, err := strconv.ParseInt(v, 10, 64); err == nil {
			{{ if .Required }}request.{{ .GoName }} = parsed{{ else }}request.{{ .GoName }} = &parsed{{ end }}
		}
	}
{{- else if eq .Type "bool" }}
	if v := r.URL.Query().Get("{{ .Name }}"); v != "" {
		if parsed, err := strconv.ParseBool(v); err == nil {
			{{ if .Required }}request.{{ .GoName }} = parsed{{ else }}request.{{ .GoName }} = &parsed{{ end }}
		}
	}
{{- else }}
	if v := r.URL.Query().Get("{{ .Name }}"); v != "" {
		request.{{ .GoName }} = {{ if not .Required }}&{{ end }}v
	}
{{- end }}
{{- end }}
{{- range .HeaderParams }}
	if v := r.Header.Get("{{ .Name }}"); v != "" {
		request.{{ .GoName }} = {{ if not .Required }}&{{ end }}v
	}
{{- end }}
{{- if .RequestBody }}
	{{ if .RequestBody.Required }}var body {{ .RequestBody.Type }}
	if err := json.NewDecoder(r.Body).Decode(&body); err != nil {
		http.Error(w, err.Error(), http.StatusBadRequest)
		return
	}
	request.Body = body{{ else }}var body {{ .RequestBody.Type }}
	if err := json.NewDecoder(r.Body).Decode(&body); err == nil {
		request.Body = &body
	}{{ end }}
{{- end }}

	response, err := h.ssi.{{ .ID }}(r.Context(){{ if or .PathParams .QueryParams .HeaderParams .RequestBody }}, request{{ end }})
	if err != nil {
		http.Error(w, err.Error(), http.StatusInternalServerError)
		return
	}

	if err := response.Visit{{ .ID }}ResponseObject(w); err != nil {
		http.Error(w, err.Error(), http.StatusInternalServerError)
	}
}
{{ end }}
// RegisterStrictHandlers registers all strict handlers with the http.ServeMux.
func RegisterStrictHandlers(mux *http.ServeMux, ssi StrictServerInterface) {
	h := NewStrictHandler(ssi)
{{ range .Operations }}
	mux.HandleFunc("{{ .Method }} {{ .FramePath }}", h.{{ .ID }})
{{- end }}
}
