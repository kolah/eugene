// Code generated by eugene. DO NOT EDIT.
package gen

import (
	"mime/multipart"
	"net/http"

	"github.com/labstack/echo/v4"
)

type UploadFileMultipartRequest struct {
	File        *multipart.FileHeader `form:"file"`
	Description string                `form:"description"`
	Tags        []string              `form:"tags"`
}

type ServerInterface interface {
	// UploadFile
	UploadFile(ctx echo.Context, req UploadFileMultipartRequest) error
}

type ServerInterfaceWrapper struct {
	Handler ServerInterface
}

func (w *ServerInterfaceWrapper) UploadFile(ctx echo.Context) error {
	var req UploadFileMultipartRequest
	if err := ctx.Request().ParseMultipartForm(32 << 20); err != nil {
		return echo.NewHTTPError(http.StatusBadRequest, "failed to parse multipart form")
	}
	if file, err := ctx.FormFile("file"); err == nil {
		req.File = file
	}
	req.Description = ctx.FormValue("description")
	if ctx.Request().MultipartForm != nil && ctx.Request().MultipartForm.Value != nil {
		req.Tags = ctx.Request().MultipartForm.Value["tags"]
	}
	return w.Handler.UploadFile(ctx, req)
}

func RegisterHandlers(e *echo.Echo, si ServerInterface) {
	wrapper := &ServerInterfaceWrapper{Handler: si}

	e.POST("/upload", wrapper.UploadFile)
}

func RegisterHandlersWithBaseURL(e *echo.Echo, si ServerInterface, baseURL string) {
	wrapper := &ServerInterfaceWrapper{Handler: si}
	g := e.Group(baseURL)

	g.POST("/upload", wrapper.UploadFile)
}
