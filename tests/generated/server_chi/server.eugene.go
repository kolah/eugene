// Code generated by eugene. DO NOT EDIT.
package gen

import (
	"net/http"
	"strconv"

	"github.com/go-chi/chi/v5"
)

type ListItemsQueryParams struct {
	Limit *int
}

type ServerInterface interface {
	// ListItems
	ListItems(w http.ResponseWriter, r *http.Request, params ListItemsQueryParams)
	// CreateItem
	CreateItem(w http.ResponseWriter, r *http.Request)
	// GetItem
	GetItem(w http.ResponseWriter, r *http.Request)
	// UpdateItem
	UpdateItem(w http.ResponseWriter, r *http.Request)
	// DeleteItem
	DeleteItem(w http.ResponseWriter, r *http.Request)
}

type ServerInterfaceWrapper struct {
	Handler ServerInterface
}

func (w *ServerInterfaceWrapper) ListItems(rw http.ResponseWriter, r *http.Request) {
	var params ListItemsQueryParams
	if v := r.URL.Query().Get("limit"); v != "" {
		if parsed, err := strconv.Atoi(v); err == nil {
			params.Limit = &parsed
		}
	}
	w.Handler.ListItems(rw, r, params)
}

func (w *ServerInterfaceWrapper) CreateItem(rw http.ResponseWriter, r *http.Request) {
	w.Handler.CreateItem(rw, r)
}

func (w *ServerInterfaceWrapper) GetItem(rw http.ResponseWriter, r *http.Request) {
	w.Handler.GetItem(rw, r)
}

func (w *ServerInterfaceWrapper) UpdateItem(rw http.ResponseWriter, r *http.Request) {
	w.Handler.UpdateItem(rw, r)
}

func (w *ServerInterfaceWrapper) DeleteItem(rw http.ResponseWriter, r *http.Request) {
	w.Handler.DeleteItem(rw, r)
}

func Handler(si ServerInterface) http.Handler {
	return HandlerWithOptions(si, ChiServerOptions{})
}

type ChiServerOptions struct {
	BaseURL     string
	Middlewares []func(http.Handler) http.Handler
}

func HandlerWithOptions(si ServerInterface, options ChiServerOptions) http.Handler {
	r := chi.NewRouter()

	for _, m := range options.Middlewares {
		r.Use(m)
	}

	wrapper := &ServerInterfaceWrapper{Handler: si}

	r.Method("GET", options.BaseURL+"/items", http.HandlerFunc(wrapper.ListItems))
	r.Method("POST", options.BaseURL+"/items", http.HandlerFunc(wrapper.CreateItem))
	r.Method("GET", options.BaseURL+"/items/{id}", http.HandlerFunc(wrapper.GetItem))
	r.Method("PUT", options.BaseURL+"/items/{id}", http.HandlerFunc(wrapper.UpdateItem))
	r.Method("DELETE", options.BaseURL+"/items/{id}", http.HandlerFunc(wrapper.DeleteItem))

	return r
}
