// Code generated by eugene. DO NOT EDIT.
package gen

import (
	"net/http"
	"strconv"

	"github.com/labstack/echo/v4"
)

// StrictEchoHandler wraps a StrictServerInterface to handle Echo requests.
type StrictEchoHandler struct {
	ssi StrictServerInterface
}

// NewStrictHandler creates a new StrictEchoHandler.
func NewStrictHandler(ssi StrictServerInterface) *StrictEchoHandler {
	return &StrictEchoHandler{ssi: ssi}
}

// ListItems handles GET /items
func (h *StrictEchoHandler) ListItems(ctx echo.Context) error {
	var request ListItemsRequestObject
	if v := ctx.QueryParam("limit"); v != "" {
		if parsed, err := strconv.Atoi(v); err == nil {
			request.Limit = &parsed
		}
	}

	response, err := h.ssi.ListItems(ctx.Request().Context(), request)
	if err != nil {
		return err
	}

	return response.VisitListItemsResponseObject(ctx.Response().Writer)
}

// CreateItem handles POST /items
func (h *StrictEchoHandler) CreateItem(ctx echo.Context) error {
	var request CreateItemRequestObject
	var body NewItem
	if err := ctx.Bind(&body); err != nil {
		return echo.NewHTTPError(http.StatusBadRequest, err.Error())
	}
	request.Body = body

	response, err := h.ssi.CreateItem(ctx.Request().Context(), request)
	if err != nil {
		return err
	}

	return response.VisitCreateItemResponseObject(ctx.Response().Writer)
}

// GetItem handles GET /items/{id}
func (h *StrictEchoHandler) GetItem(ctx echo.Context) error {

	response, err := h.ssi.GetItem(ctx.Request().Context())
	if err != nil {
		return err
	}

	return response.VisitGetItemResponseObject(ctx.Response().Writer)
}

// UpdateItem handles PUT /items/{id}
func (h *StrictEchoHandler) UpdateItem(ctx echo.Context) error {
	var request UpdateItemRequestObject
	var body NewItem
	if err := ctx.Bind(&body); err != nil {
		return echo.NewHTTPError(http.StatusBadRequest, err.Error())
	}
	request.Body = body

	response, err := h.ssi.UpdateItem(ctx.Request().Context(), request)
	if err != nil {
		return err
	}

	return response.VisitUpdateItemResponseObject(ctx.Response().Writer)
}

// DeleteItem handles DELETE /items/{id}
func (h *StrictEchoHandler) DeleteItem(ctx echo.Context) error {

	response, err := h.ssi.DeleteItem(ctx.Request().Context())
	if err != nil {
		return err
	}

	return response.VisitDeleteItemResponseObject(ctx.Response().Writer)
}

// RegisterStrictHandlers registers all strict handlers with the Echo instance.
func RegisterStrictHandlers(router Router, ssi StrictServerInterface) {
	h := NewStrictHandler(ssi)

	router.GET("/items", h.ListItems)
	router.POST("/items", h.CreateItem)
	router.GET("/items/:id", h.GetItem)
	router.PUT("/items/:id", h.UpdateItem)
	router.DELETE("/items/:id", h.DeleteItem)
}

// RegisterStrictHandlersWithBaseURL registers all strict handlers with a base URL.
func RegisterStrictHandlersWithBaseURL(router Router, ssi StrictServerInterface, baseURL string) {
	h := NewStrictHandler(ssi)

	router.GET(baseURL+"/items", h.ListItems)
	router.POST(baseURL+"/items", h.CreateItem)
	router.GET(baseURL+"/items/:id", h.GetItem)
	router.PUT(baseURL+"/items/:id", h.UpdateItem)
	router.DELETE(baseURL+"/items/:id", h.DeleteItem)
}
