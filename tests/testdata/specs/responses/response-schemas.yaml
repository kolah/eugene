openapi: "3.0.3"
info:
  title: Response Schemas Test
  version: "1.0.0"
paths:
  /offices:
    get:
      operationId: listOffices
      responses:
        "200":
          $ref: "#/components/responses/ListOfficesResponse"
  /users:
    get:
      operationId: listUsers
      responses:
        "200":
          $ref: "#/components/responses/ListUsersResponse"
components:
  schemas:
    Office:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
    User:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
    Error:
      type: object
      properties:
        slug:
          type: string
        message:
          type: string
      required:
        - slug
        - message
  responses:
    ListOfficesResponse:
      description: List Offices Response
      content:
        application/json:
          schema:
            type: object
            properties:
              offices:
                type: array
                items:
                  $ref: "#/components/schemas/Office"
            required:
              - offices
    ListUsersResponse:
      description: List Users Response
      content:
        application/json:
          schema:
            type: object
            properties:
              users:
                type: array
                items:
                  $ref: "#/components/schemas/User"
              total:
                type: integer
            required:
              - users
    ExistingSchemaRef:
      description: Response that references existing schema
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Office"
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
    NotFound:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
